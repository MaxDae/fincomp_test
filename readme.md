### General information

- I've used Tox, PyTest and Py-test selenium plugin for driver management and pytest-variables for settings;
- Multibrowser supported, drivers located on a ./drivers folder (for testing purpose I've put only FF and Chromedriver - linux/mac version) but it could be easily extended to support other drivers by adding necessary driver and capabilities or run selenium tests in parallel mode on dockers using
[Selenoid][selenoid] (for example);
- All dependencies managed by tox and virtualenv and browser capabilities described on ```_capabilities.json``` files
- On ``` ./pages folder``` Page Objects and Element classes located and in order to have an ability easily extend solution to other drivers (Android, Appium, iOS driver) common driver interface exists on ```./interfaces``` folder and selenium driver methods implemented on ```selen_driver.py```;


**Table of Contents**


[TOC]

###Prerequisites
-------------

#### How to start tests
-------
All dependencies managed by ```tox``` and ```virtualenv```.
For the test purpose two profiles created on ```tox.ini```
```[testenv:chrome]``` and ```[testenv:firefox]```


#####Install Tox

> Linux/MAC

`$ pip install tox
`
#####Start tests on Chrome [env]
`$ tox -e chrome`

------
#### General info about implementation
-- Default path to drivers is specified on ```drivers_dir``` settings on ```tox.ini```
Last version of chromedriver put to .```/drivers folder``` (could be changed to other version)



On** settings.json** - ```base_url``` variable correspond for app url. All variables from settings.json avaliable on test in ```variables``` dict
Command for pass settings to a test ```--variables setting_file_name.json```
Example:

>$  pytest --variables settings.json

**Exampe of usage:
**

```html
@pytest.mark.capabilities
class Test():

    @pytest.mark.parametrize(
        "company_name",  ["FinCompare GmbH"])
    def test_open_url(self, selenium, variables, company_name):
        credit_page = BasePage(selenium, variables.get("base_url"), 10)
```

```selenium``` test parameter is a driver instance which is passed through ```--driver``` command:

``` $ pytest --driver Chrome ```

Example of ```tox.ini``` ```[env]``` settings

```javasript
[testenv:chrome]
 commands = {[testenv]commands} --driver Chrome --driver-path
 {[main]drivers_dir}chromedriver --variables chrome_mac_capabilities.json
```

###Reporting
 By default HTML report could be generated by adding ```--html``` command to a pytest

Default parameters wich collected when test fails

* URL - The current URL open in the browser.
* HTML - The HTML source of the page open in the browser.
* LOG - All logs available.
* SCREENSHOT - A screenshot of the page open in the browser.

###Links
---------

[PyTest](https://docs.pytest.org/en/latest/) - Test framework

[Tox](https://tox.readthedocs.io/en/latest/) - dependency management and build tool

[pytest-selenium plugin](https://pytest-selenium.readthedocs.io/en/latest/"pytest-selenium") - pytest Plugin for webdriver management

[pytest-variables plugin](https://pypi.org/project/pytest-variables/) - pytest Pluging for passing settings to test

[Selenoid](https://aerokube.com/selenoid/) - Selenium grid on docker containers


###Test flow - test_fin.py
* Open wizzard
* Select credit product
* Set Amount = 100, Purpose = Purchase financing, Term = 24 month
* Submit form
* Search for FinCompare company
* Select FinCompare company
* On Registration page fill First Name field only
* Click Submit
* Verify that for all required filds except FirstName displays appropriate error message
* Fill email field with a wrong mail format  - ```FinCompare```
* Submit
* Verify that correct error message displays for email field
* Set relationship type to Business
* Fill Phone field with a wrong phone format - ```FinCompare```
* Submit
* Verify that correct error message displays for phone field
* Verify that error message no longer displays for relationship field
